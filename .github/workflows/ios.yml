name: CI
# This workflow is triggered on pushes to the repository.
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    # Job name is Test
    name: Test
    # This job runs on macOS
    runs-on: macOS-latest
    steps:
#       - name: iOS Build Action
#         uses: yukiarrr/ios-build-action@v1.5.0

      - name: Checkout
        uses: actions/checkout@v1
      - name: Build
        run: xcodebuild clean test -project ADIC-News.xcodeproj -scheme ADIC-News -destination "platform=iOS Simulator,name=iPhone 11 Pro"
      - name: Testing iOS app
        run: exec ./.github/workflows/BuildApp.sh
      # - name: Uses ruby
      #   uses: ruby/setup-ruby@v1.57.0
      #   with:
      #     ruby-version: 2.7.2
      #     bundler-cache: true
      # - name: select xcode
      #   run: sudo xcode-select -s /Applications/Xcode_13.2.1.app
      # - name: Build and test
      #   run: bundle exec fastlane ADIC-news #scan --destination "${destination}" --scheme "ADIC-news"
      #   env:
      #     destination: ${{ matrix.destination }}
      #     DEVELOPER_DIR: ${{ matrix.xcode }}
